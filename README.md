# python_mini_readability
Python experiment: small CLI program to parse web articles and extract text

Python 2.7 Web Article Parser

Алгоритм:

1) Задаем исходные критерии выборки текстов(webarticleparser.ini):
  i) Набор включений (tag:attr:value)
       - зоны в которых будет осуществляться выборка текста
       - основное тело статьи
  ii) Набор исключений(tag:attr:value)
       - набор тегов которые заведомо не содержат интересующей нас информации ( <script/>, <style/>)
       - всевозможные вставки в статьях
  iii) Набор тэгов в которых мы воспринимаем текст ( обычно это <p/> <h1/2/3/4/> )
       - Т.е. если вдруг какой-то текст находится непосредственно в <div>О как</div> и у него нет родительского текстового тэга,
         то такой текст не воспринимается, если конечно не добавить <div> в список текстовых тэгов.
  iiii) Дополнительно заданы 2 набора тэгов: перед которыми мы вставляем перевод строки
        и после которых идет перевод строки которые мы предваряем переводом строки
  iiiii) Задаем максимальную ширину строки выходного текста ( по умолчанию 80 символов)

2) Выборка текста:

  a) Разбираем HTML страницу с помощью SAX парсера (HTMLParser)
    - Тэги попадающие в набор включений - начинают зону "восприятия" текста (которая заканчивается с закрытием тэга)
    - Тэги попадающие в набор исключений - начинают зону "не-восприятия" текста (которая заканчивается с закрытием тэга)
    - Зоны "не-восприятия" текста имеют приоритет над зоной "восприятия" текста
       (т.к. <include_tag><exclude_tag> <p>Не попадет никуда</p></exclude_tag></include_tag>)
  b) Если встречается текст из зоны "восприятия" и не в зоне "не-восприятия", то текст попадает в вывод,
  если он находится в тэгах из набора iii)
  c) дополнительно применяем правила дополнительных переводов строк до и после тэгов заданных в наборе iiii)
  d) Когда разбор HTML документа закончен, на выходе получаем список текстов и переводов строк.
  e) При выводе тексты обрабатываются библиотекой (textwrap)


3) Дополнительные возможности:
 - Так как наборы включений индивидуальны для многих сайтов, то введена дополнительная опция
  allow_text_out_of_inclusion_roots ( по умолчанию false).
 - При выставлении ее в true наборы включений игнорируются и текст выбирается из всего документа.


=== Возможные пути дальнейшего развития ====
1) Создание нескольких наборов правил (индивидуальных для каждого сайта или наборов сайтов).
2) Создание шаблонов и заполнение их на основании пользовательских правил из DOM модели.
3) Поддержка RSS лент
